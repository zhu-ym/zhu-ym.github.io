---
title: Redis
typora-root-url: ../
date: 2021-03-30 10:24:35
tags:
- Redis
- 数据库
categories:
- [数据库]
---

学习Redis，了解其常见数据结构及应用场景

<!--more-->



# 一、缓存

缓存的本质思想就是空间换时间，CPU Cache 缓存的是内存数据用于解决 CPU 处理速度和内存不匹配的问题，内存缓存的是硬盘数据用于解决硬盘访问速度过慢的问题。

回到我们对数据库的访问来说，我们为了避免用户在请求数据的时候获取速度过于缓慢，所以我们在数据库之上增加了缓存这一层来弥补

## 常见缓存方案

缓存的类型分为：**本地缓存**、**分布式缓存**和**多级缓存**

- **本地缓存**

  直接在进程的内存中进行缓存，比如我们的 JVM 堆中，我的秒杀系统1.0版就是应用了一个`HashMap`作为本地缓存。Java中本地缓存使用 `Ehcache`这样的工具来实现,主要增加了过期机制。

  由于本地缓存是内存访问，没有远程交互开销，性能最好，但是受限于单机容量，一般缓存较小且无法扩展。

- **分布式缓存**

  本地缓存对分布式架构支持不友好，并且明显受服务部署所在的机器限制，分布式缓存可以很好得解决这个问题。

  分布式缓存一般都具有良好的水平扩展能力，对较大数据量的场景也能应付自如。缺点就是需要进行远程请求，性能不如本地缓存

- **多级缓存**

  多级缓存可以用来平衡上诉两种情况，在本地缓存只保存访问频率最高的部分热点数据，其他的热点数据放在分布式缓存中。（这时候就应该想到操作系统中的快表、LRU这些东西了）

  这也是最常用的缓存方案，单考单一的缓存方案往往难以撑住很多高并发的场景

## 缓存读写策略

但使用缓存后，就得考虑如何将数据更新回数据库，下面是几种方案

