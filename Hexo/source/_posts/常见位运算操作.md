---
title: 常见位运算操作
typora-root-url: ../
date: 2021-02-20 19:46:31
tags:
- 位运算
categories:
- [算法,位运算]
---

了解一下一些常见的位运算操作

<!--more-->

# 位运算基础

- 二进制基础

  计算机中一般用**补码**计算和表示数字（统一加减）

  正数：原码=反码=补码

  负数：反码=原码除符号位取反

  ​            补码=反码+1

  比如对应Java int 中对应的5和-5的二进制表示分别为

  ```java
  00000000 00000000 00000000 00000101 5反码补码
  11111111 11111111 11111111 11111011 -5补码
  11111111 11111111 11111111 11111010 -5反码
      
  public static  void main(String args[]){        System.out.println(Integer.toBinaryString(-5);  System.out.println(Integer.toBinaryString(5));
      }
  ```

  ![image-20210220201633151](/images/image-20210220201633151.png)

- 常见位运算有&，|, ~, ^, <<, >>

  \~为取反，观察上面5和-5的补码，发现5取反+1 和-5的补码一致，就有`~a + 1 = -a`

  ^为异或，相异为1；注意`-1异或任何数`相当于取反

  <<为左移，相当于乘，a<<1相当于乘2

  \>>为右移，相当于除，a >>1相当于除2

# 位运算操作

- 判断**奇偶性**

  `a&1==0//1奇0偶`

- 对i=2^n进行**取模运算**

  `a&(i-1)`

- 求**相反数**，由`~a=-(a+1)`有

  相反数:`-a=~a+1`

- 求**绝对值**，已知0异或任何数不变，-1异或任何数相当于取反

  则可这样求绝对值：

  ```java
  int j=i >> 31;    // 取符号位
  return (i ^ j)- j;// 实际就是相反数公式
  ```

- **交换两数**

  ```
  a^=b;
  b^=a;
  a^=b;
  ```

- **置位操作**

  ```
  x&(x-1) //将x最右边第一个1及以外数字置0
  ```

# Java源码实例

未完待续