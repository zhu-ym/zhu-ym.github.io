---
title: 封装
typora-root-url: ../
date: 2021-04-19 09:52:55
tags:
 - Java语法
categories:
 - [Java语法,基础]
---

了解封装的意义，以及如何实现封装

<!--more-->

# 一、简要

**封装**是Java面对对象三大基本特征之一，其作用在于：

- 使用户不要接触他们不该接触的部分，这部分对于类内部、包内部来说是必要的，但是不属于客户端程序员所需接口的一部分。
- 让类库设计者更改类内部的工作方式，而不用担心会影响到客户端程序员，这也是最重要的原因。

封装实现了信息隐藏，**实现了解耦，降低构建大型系统的风险，也方便修改重构**

在Java中，主要通过**访问控制**来实现信息隐藏

首先在一个内，包内包含一组类，这些类之间也有访问权限，即**类访问权限**

- 公有：public，确定类库中的哪些类对于类库的使用者是可用的
- 包级私有：默认，仅在该包内可以访问

其次对于一个内的成员，也有四个级别的访问控制权限：

- 私有的（private）：只有声明该成员的顶层类内部可以访问该成员
- 包级私有的（缺省）：声明该成员的包的顶层类内部可以访问该成员

- 受保护的（protected）：不仅包内该成员可以被访问，该类的子类也可以访问该成员
- 公有的（public）:任何地方都可以访问

对于这些访问控制权限的使用要求有一个总体原则：**使类和成员的访问最小化**

下面是针对这个原则作出的一些具体要求

# 二、类封装规范

## 1、类间访问

**能包级私有就做成包级私有，特别如果只在一个类内部使用这个顶层类，应该把其做为私有嵌套类**

当你创建了一个包访问权限的类，把类中的属性声明为 **private** 仍然是有意义的——应该尽可能将所有属性都声明为 **private**，但是通常把方法声明成与类（包访问权限）相同的访问权限也是合理的。

## 2、成员访问

- **尽量使用私有成员变量**
- **包级私有只有当一个包的另一个类真正需要访问一个成员时，才使用，特别的，当一个类这样的成员过多，考虑是否可以将这部分分解成包级私有类，解耦。**

- **受保护的成员变量是类导出API的一部分，是某个实现细节的公开承诺，要保证支持；尽量减少使用。**
- **公有类域绝不能是公有的（放弃不可变，线程安全，灵活性），除非是一些静态final域的常量**,这时可以考虑私有域+公有getter的解决方案，如果类可变，还需要加上公有setter方法

